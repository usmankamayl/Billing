(()=>{"use strict";const e=Object.freeze({taxes:.2,water:.3,internet:.4,security:.5,exchange:.6}),t=document.querySelectorAll(".left__company"),n=document.querySelector(".center__title"),r=document.querySelector(".center__desc"),l=document.getElementById("meters"),s=document.querySelector("#previous"),a=document.querySelector("#current"),i=document.querySelector(".form__summary-list");i.querySelectorAll(".list__item:not(:last-child)"),i.innerHTML=' <li class="list__item list__total">\n                <p><span class="list__item-label">Всего</span>\n                  <span class="price">$ <b>0</b></span>\n                </p>\n              </li>';const c=function(e){const t=`<li class="list__item" data-id=${e.id}>\n         <p><span class="list__item-label">${e.meterId}</span>\n           <span class="price">$ <b>${e.amount}</b></span>\n         </p>\n       </li>`;i.insertAdjacentHTML("afterbegin",t)},o=document.querySelector(".right__payments-fields"),d=document.getElementById("companies");o.innerHTML="";const u=function(e){const t=d.querySelector(`[data-id="${e.id}"]`),n=Array.from(document.querySelectorAll(".right__payments-field")),r=n.findIndex((t=>t.dataset.id===e.id));-1!==r?(n[r].remove(),o.insertAdjacentHTML("afterbegin",`<p class="right__payments-field" data-id="${e.id}">\n              <label>\n                <input type="checkbox" />\n                <span>${t.textContent}</span>\n              </label>\n            </p>`)):o.insertAdjacentHTML("afterbegin",`<p class="right__payments-field" data-id="${e.id}">\n              <label>\n                <input type="checkbox" />\n                <span>${t.textContent}</span>\n              </label>\n            </p>`)},m=function(e,t){document.querySelector("li.list__item.list__total b").textContent=t.reduce((function(e,t){return e+t.amount}),0)},p=document.querySelector(".form__footer  .btn");document.querySelector(".right__payments-fields");const y=document.querySelector(".form__summary-list"),_=document.querySelector(".btn-outline"),f=document.querySelector(".right__payments-footer .btn"),S=document.querySelector(".transactions__list .list__item"),h=document.querySelector(".transactions__list .list__item-error");S.style.display="none",h.style.display="none";const b={};let g=JSON.parse(localStorage.getItem("payments"))||[];for(let e=0;e<g.length;e++){const t=g[e];c(t),u(t)}m(0,g),function(e){for(let e of t)e.classList.remove("selected");t[1].classList.add("selected"),e.id="water",t.forEach((l=>{l.addEventListener("click",(()=>{for(let e of t)e.classList.remove("selected");l.classList.add("selected"),e.id=l.dataset.id;const s=l.querySelector("p");n.textContent=s.textContent,"taxes"===s.dataset.id&&(r.textContent="Оплатите налоги по полной!"),"water"===s.dataset.id&&(r.textContent="Оплата холодного водоснабжения"),"internet"===s.dataset.id&&(r.textContent="Оплата интернета"),"security"===s.dataset.id&&(r.textContent="Ну куда уж без охраны"),"exchange"===s.dataset.id&&(r.textContent="Если есть валюта, то меняй ее смело")}))}))}(b),function(e){e.meterId=l.value,l.addEventListener("change",(()=>{e.meterId=l.value})),s.addEventListener("change",(()=>{s.value>0?e.previous=s.value:alert("Заполните форму правильно")})),a.addEventListener("change",(()=>{a.value>0&&a.value>s.value?e.current=a.value:alert("Заполните форму правильно")}))}(b),function(t,n){document.querySelector(".list__total").querySelector("b"),p.addEventListener("click",(r=>{r.preventDefault();let l=Math.floor((t.current-t.previous)*e[t.id]*1e3/1e3);t.amount=l;const s=n.findIndex((e=>e.id===t.id));if(-1!==s){const e=Array.from(document.querySelectorAll(".list__item:not(:last-child)"));n.splice(s,1,Object.defineProperties({},Object.getOwnPropertyDescriptors(t))),e.forEach((e=>{e.dataset.id===t.id&&(e.remove(),c(t),u(t))}))}else n.push(Object.defineProperties({},Object.getOwnPropertyDescriptors(t))),c(t),u(t);document.querySelector("#previous").value="",document.querySelector("#current").value="",m(0,n),localStorage.setItem("payments",JSON.stringify(n))}))}(b,g),function(e){_.addEventListener("click",(()=>{document.querySelector(".right__payments-fields").innerHTML="",e.length=0,y.innerHTML=' <li class="list__item list__total">\n                <p><span class="list__item-label">Всего</span>\n                  <span class="price">$ <b>0</b></span>\n                </p>\n              </li>',localStorage.clear()}))}(g),function(e,t){f.addEventListener("click",(n=>{n.preventDefault(),S.style.display="none",h.style.display="none";const r=Array.from(document.querySelectorAll(".right__payments-field")),l=Array.from(document.querySelectorAll(".form__summary-list .list__item:not(:last-child)")),s=[];r.forEach((e=>{e.querySelector("input").checked&&s.push(e.dataset.id)}));const a=t.filter((e=>s.indexOf(e.id)>-1)),i=a.reduce((function(e,t){return e+t.amount}),0);e-i>0?(S.style.display="block",r.forEach((e=>{if(e.querySelector("input").checked){const n=t.findIndex((t=>t.id===e.dataset.id));t.splice(n,1),e.remove(),m(t[n],t),localStorage.clear(),localStorage.setItem("payments",JSON.stringify(t))}})),l.forEach((e=>{a.forEach((t=>{e.dataset.id===t.id&&e.remove()}))}))):h.style.display="block"}))}(100,g)})();
//# sourceMappingURL=app.dadf9327.js.map